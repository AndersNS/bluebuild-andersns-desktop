# yaml-language-server: $schema=https://schema.blue-build.org/module-v1.json
# Shared modules for all image variants

modules:
  - type: files
    files:
      - source: system
        destination: /

  # Install Nix via Determinate installer
  - type: script
    scripts:
      - install-nix.sh

  # Install Hyprland and utilities
  - type: dnf
    repos:
      copr:
        - lionheartp/Hyprland
    install:
      packages:
        # Hyprland
        - hyprland
        - hyprland-qt-support
        - hyprland-guiutils
        - xdg-desktop-portal-hyprland
        - hyprpaper
        - hyprlock
        - hypridle
        # Bar and launchers
        - waybar
        - wofi
        - rofi-wayland
        # Utilities
        - swaync
        - wlogout
        - grim
        - slurp
        # Terminals
        - foot
        - kitty
        - alacritty
        # File manager
        - thunar
        - thunar-archive-plugin
        - thunar-volman
        # Audio/media
        - playerctl
        - pamixer
        - pavucontrol
        - blueman
        - papirus-icon-theme
        - fontawesome-fonts-all
        - jetbrains-mono-fonts-all

  # Configure display manager and user configs (after packages installed)
  - type: script
    scripts:
      - configure-sddm.sh
      - setup-user-configs.sh
      - customize-os-release.sh

  # Flatpaks
  - type: default-flatpaks
    configurations:
      - scope: system
        notify: true
        install:
          - com.mitchellh.ghostty

  # Image signing
  - type: signing
